<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.canco.assetstockin.dao.StockInInfoListMapper">
  <resultMap id="BaseResultMap" type="com.canco.assetstockin.model.StockInInfoList">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    <id column="stock_in_info_id" jdbcType="INTEGER" property="stockInInfoId" />
    <result column="stock_in_info_stock_in_id" jdbcType="INTEGER" property="stockInInfoStockInId" />
    <result column="stock_in_info_asset_id" jdbcType="INTEGER" property="stockInInfoAssetId" />
    <result column="stock_in_info_is_visible" jdbcType="CHAR" property="stockInInfoIsVisible" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    stock_in_info_id, stock_in_info_stock_in_id, stock_in_info_asset_id, stock_in_info_is_visible
  </sql>
  <select id="selectByExample" parameterType="com.canco.assetstockin.model.StockInInfoListExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from stock_in_info_list
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    select 
    <include refid="Base_Column_List" />
    from stock_in_info_list
    where stock_in_info_id = #{stockInInfoId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    delete from stock_in_info_list
    where stock_in_info_id = #{stockInInfoId,jdbcType=INTEGER}
  </delete>
  <delete id="deleteByExample" parameterType="com.canco.assetstockin.model.StockInInfoListExample">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    delete from stock_in_info_list
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.canco.assetstockin.model.StockInInfoList">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    insert into stock_in_info_list (stock_in_info_id, stock_in_info_stock_in_id, 
      stock_in_info_asset_id, stock_in_info_is_visible)
    values (#{stockInInfoId,jdbcType=INTEGER}, #{stockInInfoStockInId,jdbcType=INTEGER}, 
      #{stockInInfoAssetId,jdbcType=INTEGER}, #{stockInInfoIsVisible,jdbcType=CHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.canco.assetstockin.model.StockInInfoList">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    insert into stock_in_info_list
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="stockInInfoId != null">
        stock_in_info_id,
      </if>
      <if test="stockInInfoStockInId != null">
        stock_in_info_stock_in_id,
      </if>
      <if test="stockInInfoAssetId != null">
        stock_in_info_asset_id,
      </if>
      <if test="stockInInfoIsVisible != null">
        stock_in_info_is_visible,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="stockInInfoId != null">
        #{stockInInfoId,jdbcType=INTEGER},
      </if>
      <if test="stockInInfoStockInId != null">
        #{stockInInfoStockInId,jdbcType=INTEGER},
      </if>
      <if test="stockInInfoAssetId != null">
        #{stockInInfoAssetId,jdbcType=INTEGER},
      </if>
      <if test="stockInInfoIsVisible != null">
        #{stockInInfoIsVisible,jdbcType=CHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.canco.assetstockin.model.StockInInfoListExample" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    select count(*) from stock_in_info_list
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    update stock_in_info_list
    <set>
      <if test="record.stockInInfoId != null">
        stock_in_info_id = #{record.stockInInfoId,jdbcType=INTEGER},
      </if>
      <if test="record.stockInInfoStockInId != null">
        stock_in_info_stock_in_id = #{record.stockInInfoStockInId,jdbcType=INTEGER},
      </if>
      <if test="record.stockInInfoAssetId != null">
        stock_in_info_asset_id = #{record.stockInInfoAssetId,jdbcType=INTEGER},
      </if>
      <if test="record.stockInInfoIsVisible != null">
        stock_in_info_is_visible = #{record.stockInInfoIsVisible,jdbcType=CHAR},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    update stock_in_info_list
    set stock_in_info_id = #{record.stockInInfoId,jdbcType=INTEGER},
      stock_in_info_stock_in_id = #{record.stockInInfoStockInId,jdbcType=INTEGER},
      stock_in_info_asset_id = #{record.stockInInfoAssetId,jdbcType=INTEGER},
      stock_in_info_is_visible = #{record.stockInInfoIsVisible,jdbcType=CHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.canco.assetstockin.model.StockInInfoList">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    update stock_in_info_list
    <set>
      <if test="stockInInfoStockInId != null">
        stock_in_info_stock_in_id = #{stockInInfoStockInId,jdbcType=INTEGER},
      </if>
      <if test="stockInInfoAssetId != null">
        stock_in_info_asset_id = #{stockInInfoAssetId,jdbcType=INTEGER},
      </if>
      <if test="stockInInfoIsVisible != null">
        stock_in_info_is_visible = #{stockInInfoIsVisible,jdbcType=CHAR},
      </if>
    </set>
    where stock_in_info_id = #{stockInInfoId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.canco.assetstockin.model.StockInInfoList">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 15 15:51:52 CST 2014.
    -->
    update stock_in_info_list
    set stock_in_info_stock_in_id = #{stockInInfoStockInId,jdbcType=INTEGER},
      stock_in_info_asset_id = #{stockInInfoAssetId,jdbcType=INTEGER},
      stock_in_info_is_visible = #{stockInInfoIsVisible,jdbcType=CHAR}
    where stock_in_info_id = #{stockInInfoId,jdbcType=INTEGER}
  </update>
    <!-- @CodeGen begin -->
	<!-- 以下是自行添加的sql方法 -->

	<!-- 联合查询 -->
	<select id="selectAssetStockList" parameterType="com.canco.assetstockin.model.AssetStockListExample" resultMap="selectStockAssetResult">
		select
		<if test="stockInInfoListExample.distinct">
			distinct
		</if>
		<include refid="com.canco.assetstockin.dao.AssetListMapper.Base_Column_List" />
		,
		<include refid="com.canco.assetstockin.dao.StockInInfoListMapper.Base_Column_List" />
		,
		<include refid="com.canco.assetstockin.dao.StockInListMapper.Base_Column_List" />
        from (stock_in_info_list  left join asset_list on asset_list.asset_id = stock_in_info_list.stock_in_info_asset_id
        left join stock_in_list on stock_in_list.stock_in_id = stock_in_info_list.stock_in_info_stock_in_id)
		<if test="_parameter != null">
			<where>
				<trim prefix="(" prefixOverrides="and" suffix=")">
					<include refid="com.canco.assetstockin.dao.AssetListMapper.Example_Where_Clause_Complex" />
					<include refid="com.canco.assetstockin.dao.StockInInfoListMapper.Example_Where_Clause_Complex" />
					<include refid="com.canco.assetstockin.dao.StockInListMapper.Example_Where_Clause_Complex" />
				</trim>
			</where>
		</if>
		<if test="stockInInfoListExample.orderByClause != null">
			order by ${stockInInfoListExample.orderByClause}
		</if>
        <if test=" stockInInfoListExample.start!= null">
            LIMIT ${stockInInfoListExample.start}
        </if>
        <if test="stockInInfoListExample.offset != null">
            ,${stockInInfoListExample.offset}
        </if>
	</select>


	<resultMap id="selectStockAssetResult" type="com.canco.assetstockin.model.AssetStockList">
        <id column="stock_in_info_id" property="stockInInfoId"/>
        <association property="stockInInfoList" resultMap="com.canco.assetstockin.dao.StockInInfoListMapper.BaseResultMap" />
		<association property="stockInList" resultMap="com.canco.assetstockin.dao.StockInListMapper.BaseResultMap" />
		<association property="assetList" resultMap="com.canco.assetstockin.dao.AssetListMapper.BaseResultMap" />
	</resultMap>
    <!-- @CodeGen end -->

    <sql id="Example_Where_Clause_Complex">
		<foreach collection="stockInInfoListExample.oredCriteria" item="criteria" separator="or">
			<if test="criteria.valid">
				<foreach collection="criteria.criteria" item="criterion">
					<choose>
						<when test="criterion.noValue">
							and ${criterion.condition}
						</when>
						<when test="criterion.singleValue">
							and ${criterion.condition} #{criterion.value}
						</when>
						<when test="criterion.betweenValue">
							and ${criterion.condition} #{criterion.value} and
							#{criterion.secondValue}
						</when>
						<when test="criterion.listValue">
							and ${criterion.condition}
							<foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
								#{listItem}
							</foreach>
						</when>
					</choose>
				</foreach>
			</if>
		</foreach>
	</sql>

    <select id="selectAssetListNotInStockInInfoList" parameterType="com.canco.assetstockin.model.AssetStockListExample"
            resultMap="com.canco.assetstockin.dao.AssetListMapper.BaseResultMap">
        select distinct
        <include refid="com.canco.assetstockin.dao.AssetListMapper.Base_Column_List" />
        from asset_list
        where asset_id not in(select stock_in_info_asset_id from stock_in_info_list)
        and  asset_is_visible='1'
        <!--<if test="stockInInfoListExample.orderByClause != null">-->
            <!--order by ${stockInInfoListExample.orderByClause}-->
        <!--</if>-->
        <!--<if test=" stockInInfoListExample.start!= null">-->
            <!--LIMIT ${stockInInfoListExample.start}-->
        <!--</if>-->
        <!--<if test="stockInInfoListExample.offset != null">-->
            <!--,${stockInInfoListExample.offset}-->
        <!--</if>-->
    </select>

</mapper>